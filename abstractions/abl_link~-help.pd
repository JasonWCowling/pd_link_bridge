#N canvas 272 23 420 808 10;
#X msg 292 500 tempo \$1;
#X msg 59 502 resolution \$1;
#X msg 168 523 reset \$1 \$2;
#X obj 168 502 pack f f;
#X text 27 45 abl_link~ is a Pd external for iOS that integrates Ableton
Link into libpd. To support patching with abl_link~ outside of iOS
\, there is an abstraction \, also called abl_link~ \, that mimics
the behavior of the external (minus the actual Link functionality \,
of course).;
#X floatatom 265 584 5 0 0 1 beat_time - -, f 5;
#X floatatom 209 605 5 0 0 1 phase - -, f 5;
#X msg 50 596 \; pd dsp 1;
#X obj 59 482 nbx 5 14 1 8 0 1 empty empty resolution 0 -8 0 10 -262144
-1 -1 1 256;
#X obj 219 481 nbx 5 14 1 16 0 1 empty empty quantum 0 -8 0 10 -262144
-1 -1 4 256;
#X obj 293 480 nbx 5 14 20 240 0 1 empty empty tempo 0 -8 0 10 -262144
-1 -1 51 256;
#X obj 154 481 nbx 5 14 -1e+37 1e+37 0 1 empty empty beat 0 -8 0 10
-262144 -1 -1 0 256;
#X obj 154 559 abl_link~ 1 0 4 120;
#X text 27 24 abl_link~: Ableton Link external/abstraction;
#X text 26 251 The creation arguments \, all optional \, specify the
resolution (default 1) and the initial beat time (default 0) \, as
well as the quantum and tempo \, which will default to the current
Link session settings. If Link is already connected when the abl_link~
object is created \, the tempo parameter will be ignored.;
#X obj 262 672 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X floatatom 343 714 5 0 0 1 tempo - -, f 5;
#X floatatom 262 714 5 0 0 1 quantum - -, f 5;
#X obj 262 692 abl_link_state;
#X text 32 743 abl_link_state is an external (with a matching abstraction)
that emits the current quantum and session tempo of Link.;
#X floatatom 154 631 5 0 0 1 step - -, f 5;
#X text 27 118 abl_link~ has three outlets \, which emit the index
of the current step (at the beginning of each step) \, as well as the
current phase and beat time at each dsp tick.;
#X text 27 166 abl_link~ responds to three methods \, for setting the
resolution of the first outlet (in steps per beat) \, the tempo (in
beats per minute) \, and for resetting the beat time and quantum. Note
that the reset method may result in a beat time that's less than the
requested value because that's how the corresponding Link function
behaves.;
#X text 26 337 Note that the abstraction is just a quick hack to create
a reasonable patching experience with abl_link~ \; it is not trying
to be complete or even entirely correct. In particular \, apart from
the absence of actual Link functionality \, the tempo message will
reset the beat time (because it was easier to implement that way) \,
and the step outlet may not fire if the quantum is one or less (same
reason).;
#X connect 0 0 12 0;
#X connect 1 0 12 0;
#X connect 2 0 12 0;
#X connect 3 0 2 0;
#X connect 8 0 1 0;
#X connect 9 0 3 1;
#X connect 10 0 0 0;
#X connect 11 0 3 0;
#X connect 12 0 20 0;
#X connect 12 1 6 0;
#X connect 12 2 5 0;
#X connect 15 0 18 0;
#X connect 18 0 17 0;
#X connect 18 1 16 0;
